<!DOCTYPE html> <!-- Declares HTML5 document type -->
<html lang="en"> <!-- Root HTML element with English language -->
<head>
    <meta charset="UTF-8"> <!-- Character encoding -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive scaling -->
    <title>Facility Digital Sign</title> <!-- Browser tab title -->

    <!-- External CSS stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>

<body> <!-- Page body starts -->

<!-- ===========================
     MAIN CONTAINER
     (Splits screen into left and right panels)
=========================== -->
<div class="container">

    <!-- ===========================
         LEFT PANEL
         Clock + Maps + Points of Contact
    =========================== -->
    <div class="left-panel">

        <!-- ===========================
             TOP CONTENT WRAPPER
             (Clock + Maps stacked vertically)
        =========================== -->
        <div class="top-content">

            <!-- ===========================
                 CLOCK SECTION
                 (24-hour live clock display)
            =========================== -->
            <div class="clock">
                <div id="clock">00:00:00</div> <!-- Clock text updated by JavaScript -->
            </div>

            <!-- ===========================
                 MAPS / DIRECTORY SECTION
                 (Building floor maps)
            =========================== -->
            <div class="maps-container">

                <!-- Row 1: Two maps side-by-side -->
                <div class="maps-row">
                    <img src="map1.jpg" alt="Floor 1 Map"> <!-- First floor map -->
                    <img src="map2.jpg" alt="Floor 2 Map"> <!-- Second floor map -->
                </div>

            </div> <!-- End maps-container -->

        </div> <!-- End top-content -->

        <!-- ===========================
             POINTS OF CONTACT TABLE
             (Centered under maps)
        =========================== -->
        <div class="events-container"> <!-- Reusing container styling for centered table -->

            <!-- Table wrapper (50% width and centered via CSS) -->
            <div class="table-wrapper">

                <!-- Section title -->
                <h2 class="section-title">Points of Contact</h2>

                <!-- Points of Contact Table -->
                <table class="event-table"> <!-- Reusing event-table styling -->
                    <tbody>
                        <!-- Row 1: Security -->
                        <tr>
                            <td>Building Security</td> <!-- POC Name -->
                            <td>A100 / Ex. 1234</td> <!-- Room and extension -->
                        </tr>

                        <!-- Row 2: IT Support -->
                        <tr>
                            <td>IT Support</td>
                            <td>A101 / Ex. 5678</td>
                        </tr>

                        <!-- Row 3: Network Team -->
                        <tr>
                            <td>Network Team</td>
                            <td>A102 / Ex. 8765</td>
                        </tr>

                        <!-- Row 4: Front Desk -->
                        <tr>
                            <td>Front Desk</td>
                            <td>Main Lobby / Ex. 4321</td>
                        </tr>
                    </tbody>
                </table>

            </div> <!-- End table-wrapper -->

        </div> <!-- End events-container -->

    </div> <!-- End left-panel -->

    <!-- ===========================
         RIGHT PANEL
         LIVE EVENTS FROM EXCEL (CSV)
         Columns: Event | Room | Time
    =========================== -->
    <div class="right-panel">

        <!-- Events Section Title -->
        <div class="events-title">Today's Events</div>

        <!-- Events Table (Auto-populated from Schedule.csv) -->
       <table class="events-table">
        <tbody id="events-body">
        <!-- Events from Google Sheet will load here -->
        </tbody>
       </table>

    </div> <!-- End right-panel -->

</div> <!-- End container -->

<!-- ===========================
     JAVASCRIPT SECTION
     Clock + CSV Event Loader
=========================== -->
<script>
    // ===========================
    // CLOCK FUNCTION (24-hour format)
    // ===========================

    // Define a function that updates the clock display
    function updateClock() {

        const now = new Date(); 
        // Gets the current system date and time from the user's computer

        const hours = String(now.getHours()).padStart(2,'0'); 
        // Extracts the hour (0–23) and forces it to always be 2 digits (e.g., 09 instead of 9)

        const minutes = String(now.getMinutes()).padStart(2,'0'); 
        // Extracts the minutes (0–59) and formats to 2 digits

        const seconds = String(now.getSeconds()).padStart(2,'0'); 
        // Extracts the seconds (0–59) and formats to 2 digits

        document.getElementById('clock').textContent = `${hours}:${minutes}:${seconds}`; 
        // Finds the HTML element with id="clock" and updates the text to the current time
    }

    updateClock(); 
    // Runs the clock function immediately when the page first loads

    setInterval(updateClock, 1000); 
    // Re-runs the clock function every 1000 milliseconds (1 second) for live time updates


    // ===========================
    // LOAD EVENTS FROM GOOGLE SHEET (CSV)
    // ===========================

    // Define a function that retrieves and displays events from the Google Sheet CSV link
    function loadEvents() {

        fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vTG1VRLGVRzEDmy_EWkJWdRC3wmC4MH-tLLnBF8Q1aAJU5BX-AyR9jGZpS9jK1rl1EqVZUtcnVWn7ea/pub?output=csv")
        // Sends a web request to the published Google Sheet CSV URL

        .then(response => response.text())
        // Converts the downloaded CSV file into plain text so JavaScript can read it

        .then(csv => {
            // Begins processing the CSV text data

            const rows = csv.trim().split("\n").slice(1); 
            // Removes extra whitespace, splits the CSV into rows using line breaks,
            // and skips the first row (header row: Event, Room, Time)

            const tableBody = document.getElementById("events-body"); 
            // Gets the table body element where event rows will be inserted dynamically

            tableBody.innerHTML = ""; 
            // Clears any existing table rows before adding fresh data (prevents duplicates)

            rows.forEach(row => {
                // Loops through each row of CSV data one at a time

                const cols = row.split(","); 
                // Splits each row into columns using commas
                // Example: "Event1,A100,900" → [Event1, A100, 900]

                if (cols.length >= 3 && cols[0].trim() !== "") {
                    // Ensures the row has at least 3 columns AND is not empty
                    // Prevents blank rows from appearing on the display

                    const tr = document.createElement("tr"); 
                    // Creates a new HTML table row element (<tr>)

                    tr.innerHTML = `
                        <td>${cols[0]}</td>
                        <td>${cols[1]}</td>
                        <td>${cols[2]}</td>
                    `;
                    // Inserts the Event, Room, and Time into three table cells (<td>)
                    // Column 0 = Event name
                    // Column 1 = Room
                    // Column 2 = Time

                    tableBody.appendChild(tr); 
                    // Adds the newly created row to the table body on the webpage
                }
            });
        })

        .catch(error => {
            // Runs if the CSV fails to load (network error, bad link, permissions, etc.)

            console.error("Error loading CSV:", error); 
            // Prints an error message in the browser developer console (F12)
        });
    }

    // ===========================
    // AUTO-LOAD + AUTO-REFRESH
    // ===========================

    loadEvents(); 
    // Immediately loads events when the page opens (initial data display)

    setInterval(loadEvents, 60000); 
    // Automatically refreshes the event list every 60 seconds
    // This keeps the digital sign synced with the live Google Sheet
</script>

</body> <!-- End body -->
</html> <!-- End HTML document -->
